const ClockModifier = require("./clock_modifier");
const helpers       = require("./helpers");


/**
 * Multiply another clock algorithm object by duplicating and compressing its gates N times.
 */
class Multiplier extends ClockModifier {

    /**
     * Create a new Multiplier.
     *
     * @param {integer} multiplier the amount to speed up a clock this multiplier is applied to
     */
    constructor(multiplier) {
        super();
        this.multiplier = multiplier;
    }


    /**
     * Modify the specified clock by speeding it up by the multiplier.
     *
     * Modifies the data in the supplied clock.
     *
     * @param {clock} clock a Clockalgo.js clock to be sped up
     */
    applyTo(clock) {
        clock.steps = clock.steps * this.multiplier;

        let divisions = new Array();
        for (let i = 0; i < this.multiplier; i++)
            clock.divisions.forEach(d => divisions.push((i + d) / this.multiplier));

        clock.divisions = divisions;
    }
}


module.exports = Multiplier;
