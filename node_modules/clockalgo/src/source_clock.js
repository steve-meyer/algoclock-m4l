const helpers = require("./helpers");


/**
 * A SourceClock is the super class for clock algorithms that can only be used as the first algorithm
 * in a chain.
 */
class SourceClock {

    static SOURCE_CLOCK_STEPS_ERR_MSG   = "The steps arg to a SourceClock constructor must be an integer";
    static GATE_LIST_VALIDATION_ERR_MSG = "A GateList must consist of an Array of 1's and 0's";


    constructor(steps) {
        if (this.constructor.name == "GateList") {
            if (!steps.every((step) => (step === 1 || step === 0))) {
                throw new Error(SourceClock.GATE_LIST_VALIDATION_ERR_MSG);
            }
            this.steps = steps.length;
        } else {
            if (!helpers.isInteger(steps)) {
                throw new Error(SourceClock.SOURCE_CLOCK_STEPS_ERR_MSG);
            } else {
                this.steps = steps;
            }
        }
    }


    apply(modifier) {
        modifier.applyTo(this);
    }
}


module.exports = SourceClock;
